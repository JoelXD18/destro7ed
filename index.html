<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Destro7ed</title>
  <link rel="icon" href="img/rounded.ico" type="image/x-icon">
  <link rel="stylesheet" href="style.css">
</head>
<body>

  
    <h1>Pizarra de Mensajes</h1>

    <label for="username">Nombre de usuario:</label>
    <input type="text" id="username" placeholder="Ingresa tu nombre" required>
    <br>

    <label for="message">Mensaje:</label>
    <textarea id="message" placeholder="Escribe un mensaje..." rows="4" required></textarea>
    <br>

    <button onclick="submitMessage()">Enviar Mensaje</button>

    <div id="messages"></div>

  <script type="module">
  // Configuración de Firebase
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js";
  import { getDatabase, ref, set, push, onChildAdded } from "https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js";
  
 // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyDBJZdUYznvwU_YDDjjEVjA6oW8Bgxg6Qo",
  authDomain: "message-801a6.firebaseapp.com",
  databaseURL: "https://message-801a6-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "message-801a6",
  storageBucket: "message-801a6.firebasestorage.app",
  messagingSenderId: "930429385952",
  appId: "1:930429385952:web:331b467af4cd6902806485",
  measurementId: "G-GBJWMHPQJ6"
};

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);

  // Función para enviar un mensaje
  function submitMessage() {
    const username = document.getElementById('username').value.trim();
    const message = document.getElementById('message').value.trim();

    if (!username || !message) {
      alert("Por favor, ingresa un nombre de usuario y un mensaje.");
      return;
    }

    const messageData = {
      username: username,
      message: message,
      timestamp: Date.now()
    };

    // Guardar el mensaje en Firebase
    push(ref(database, 'messages'), messageData)
      .then(() => {
        document.getElementById('message').value = ''; // Limpiar el campo de mensaje
      })
      .catch((error) => {
        console.error("Error al enviar el mensaje:", error);
      });
  }

  // Función para cargar los mensajes en tiempo real
  function loadMessages() {
    const messagesRef = ref(database, 'messages');
    
    // Escucha los cambios en la base de datos (nuevos mensajes)
    onChildAdded(messagesRef, (snapshot) => {
      const messageData = snapshot.val();
      const messageElement = document.createElement('div');
      messageElement.classList.add('message');
      messageElement.innerHTML = `<strong>${messageData.username}</strong>: <p>${messageData.message}</p>`;
      document.getElementById('messages').appendChild(messageElement);
    });
  }

  // Cargar los mensajes al inicio
  loadMessages();
</script>


   <!-- Agregar los scripts de Firebase -->
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.19.1/firebase-database.js"></script>

    <!-- Referenciar tu archivo script.js -->
    <script src="script.js"></script>
  
  <!-- Menú de navegación -->
  <nav class="menu">
    <a href="index.html" onclick="showSection('home')">Home</a>
    <a href="archivo.html" onclick="showSection('archivo')">Archive</a>
    <a href="contact.html" onclick="showSection('contacto')">Contact</a>
  </nav>

  <!-- Sección de Home -->
  <div id="home" class="section active">
    <div class="animated-name">DESTRO7ED</div>
  </div>

</body>
</html>
